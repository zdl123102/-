{
  "articleStyle": 0,
  "customOrder": 0,
  "enableJs": false,
  "enabled": true,
  "enabledCookieJar": false,
  "header": "{\n  \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n  \"Referer\": \"https://www.cool18.com/\"\n}",
  "lastUpdateTime": 0,
  "loadWithBaseUrl": true,
  "ruleArticles": ".thread-list li.l-m1,.gallery .gallery-item",
  "ruleContent": "<js>\n(() => {\n    var doc = org.jsoup.Jsoup.parse(result);\n    var title = '';\n    var author = '';\n    var date = '';\n    var imgUrls = [];\n    var adDomains = ['parkvv.com', 'interactivebrokers.com', 'ad.', 'banner', 'adv-', 'doppiocdn', 'ads.retukucdn.com'];\n    \n    // 检测页面类型\n    var isNewSystem = doc.select('.gallery-item').size() > 0;\n    \n    if (isNewSystem) {\n        // 新系统 - 分类页面 (卡通福利等)\n        // 提取标题\n        var titleEl = doc.select('h1').first();\n        title = titleEl ? String(titleEl.text()) : '';\n        \n        // 提取帖子内容中的图片\n        var contentDiv = doc.select('#content, .content, main, article').first();\n        if (!contentDiv) contentDiv = doc.body();\n        \n        var imgs = contentDiv.select('img[src]');\n        for (var i = 0; i < imgs.size(); i++) {\n            var src = String(imgs.get(i).attr('src'));\n            var isAd = false;\n            for (var j = 0; j < adDomains.length; j++) {\n                if (src.toLowerCase().indexOf(adDomains[j]) >= 0) {\n                    isAd = true;\n                    break;\n                }\n            }\n            if (!isAd && src && src.length > 20) {\n                // 转换缩略图URL为原图 (去掉 _m.jpg 后缀)\n                if (src.indexOf('_m.jpg') > 0) {\n                    src = src.replace('_m.jpg', '.jpg');\n                }\n                if (src.indexOf('http') !== 0) {\n                    src = 'https://www.cool18.com/' + src;\n                }\n                imgUrls.push(src);\n            }\n        }\n    } else {\n        // 旧系统 - 主页/论坛帖子\n        // 提取标题\n        var titleEl = doc.select('h1.main-title').first();\n        title = titleEl ? String(titleEl.text()) : String(title);\n        \n        // 提取作者和时间\n        var authorEl = doc.select('.sender a').first();\n        author = authorEl ? String(authorEl.text()) : '';\n        var dateEl = doc.select('.sender span').first();\n        date = dateEl ? String(dateEl.text()) : '';\n        \n        // 提取帖子内容中的图片 - 在pre标签内\n        var preEl = doc.select('#content-section pre').first();\n        if (!preEl) preEl = doc.select('.content-section pre').first();\n        \n        if (preEl) {\n            var imgs = preEl.select('img[src]');\n            for (var i = 0; i < imgs.size(); i++) {\n                var src = String(imgs.get(i).attr('src'));\n                var isAd = false;\n                for (var j = 0; j < adDomains.length; j++) {\n                    if (src.toLowerCase().indexOf(adDomains[j]) >= 0) {\n                        isAd = true;\n                        break;\n                    }\n                }\n                if (!isAd && src && src.length > 20 && (src.indexOf('http') === 0 || src.indexOf('//') === 0)) {\n                    if (src.indexOf('//') === 0) src = 'https:' + src;\n                    imgUrls.push(src);\n                }\n            }\n        }\n        \n        // 如果pre里没有，尝试从整个content-section获取\n        if (imgUrls.length === 0) {\n            var contentSection = doc.select('#content-section').first();\n            if (contentSection) {\n                imgs = contentSection.select('img[src]');\n                for (var i = 0; i < imgs.size(); i++) {\n                    var src = String(imgs.get(i).attr('src'));\n                    var isAd = false;\n                    for (var j = 0; j < adDomains.length; j++) {\n                        if (src.toLowerCase().indexOf(adDomains[j]) >= 0) {\n                            isAd = true;\n                            break;\n                        }\n                    }\n                    if (!isAd && src && src.length > 20) {\n                        if (src.indexOf('//') === 0) src = 'https:' + src;\n                        imgUrls.push(src);\n                    }\n                }\n            }\n        }\n    }\n    \n    // 构建HTML\n    var htmlContent = '<!DOCTYPE html>\\n<html>\\n<head>';\n    htmlContent += '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">';\n    htmlContent += '<title>' + title + '</title>';\n    htmlContent += '<link rel=\"stylesheet\" href=\"https://cdn.bootcdn.net/ajax/libs/viewerjs/1.10.1/viewer.min.css\">';\n    htmlContent += '<script src=\"https://cdn.bootcdn.net/ajax/libs/viewerjs/1.10.1/viewer.min.js\"><\\/script>';\n    htmlContent += '<style>';\n    htmlContent += '*{margin:0;padding:0}body{background:#1a1a1a;color:#ddd;font-size:14px;line-height:1.6}';\n    htmlContent += '.header{padding:20px;text-align:center;background:linear-gradient(135deg,#2d2d2d,#1a1a1a);border-bottom:1px solid #333}';\n    htmlContent += '.header h2{color:#ff6b6b;font-size:16px;margin:0;word-wrap:break-word}';\n    htmlContent += '.info{padding:10px 20px;font-size:12px;color:#888;background:#222}';\n    htmlContent += 'img{max-width:100%;height:auto;display:block;margin:5px auto;border-radius:4px}';\n    htmlContent += '.page{text-align:center;padding:15px;background:#222;border-top:1px solid #333}';\n    htmlContent += '.page a{color:#4a9eff;margin:0 10px;text-decoration:none}';\n    htmlContent += '#toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:#fff;padding:10px 20px;border-radius:20px;z-index:999;opacity:0;transition:opacity 0.3s}';\n    htmlContent += '#toast.show{opacity:1}';\n    htmlContent += '#backToTop{position:fixed;bottom:30px;right:20px;background:rgba(255,107,107,0.8);color:#fff;width:40px;height:40px;border-radius:50%;text-align:center;line-height:40px;cursor:pointer;display:none;z-index:998}';\n    htmlContent += '</style>\\n</head>\\n<body>';\n    \n    htmlContent += '<div class=\"header\"><h2>' + title + '</h2></div>';\n    if (author) htmlContent += '<div class=\"info\">作者: ' + author + ' | ' + date + '</div>';\n    \n    // 添加图片\n    for (var i = 0; i < imgUrls.length; i++) {\n        htmlContent += '<img src=\"' + imgUrls[i] + '\" onerror=\"this.style.display=\\'none\\'\"/>';\n    }\n    \n    htmlContent += '<div id=\"toast\">已加载 ' + imgUrls.length + ' 张图片</div>';\n    htmlContent += '<div id=\"backToTop\">↑</div>';\n    \n    htmlContent += '<script>';\n    htmlContent += '(function(){';\n    htmlContent += 'var toast=document.getElementById(\"toast\");';\n    htmlContent += 'var imgs=document.querySelectorAll(\"img\");';\n    htmlContent += 'var loaded=0;';\n    htmlContent += 'function check(){loaded++;if(loaded>=imgs.length){toast.innerText=\"✅ 已加载 \"+imgs.length+\" 张图片\";setTimeout(function(){toast.classList.add(\"show\");},100);setTimeout(function(){toast.classList.remove(\"show\");},3000);initViewer();}};';\n    htmlContent += 'imgs.forEach(function(img){if(img.complete){check()}else{img.onload=check;img.onerror=check}});';\n    htmlContent += 'var btn=document.getElementById(\"backToTop\");';\n    htmlContent += 'window.onscroll=function(){btn.style.display=window.scrollY>300?\"block\":\"none\"};';\n    htmlContent += 'btn.onclick=function(){window.scrollTo({top:0,behavior:\"smooth\"})};';\n    htmlContent += 'function initViewer(){var c=document.querySelector(\"body\");if(c&&typeof Viewer!==\"undefined\"){var v=new Viewer(c,{toolbar:true,navbar:true,title:false, viewed:function(){btn.style.display=\"none\"}, hidden:function(){if(window.scrollY>300)btn.style.display=\"block\"}});}}';\n    htmlContent += '})();';\n    htmlContent += '</script>\\n</body>\\n</html>';\n    \n    return htmlContent;\n})()\n</js>",
  "ruleImage": "@js:var doc = org.jsoup.Jsoup.parse(result); var img = doc.select('.gallery-item img').first(); if (!img) { var li = doc.select('.thread-list li.l-m1').first(); if (li) img = li.select('img').first(); } var src = img ? String(img.attr('src')) : ''; if (src && src.indexOf('http') !== 0 && src.indexOf('//') !== 0) { src = 'https://www.cool18.com/' + src; } src || 'https://www.cool18.com/favicon.ico'",
  "ruleLink": "@js:var doc = org.jsoup.Jsoup.parse(result); var link = doc.select('.thread-list li.l-m1 a').first(); if (!link) link = doc.select('.gallery-item a').first(); link ? String(link.attr('href')) : ''",
  "ruleTitle": "@js:var doc = org.jsoup.Jsoup.parse(result); var title = doc.select('.thread-list li.l-m1 a').first(); if (!title) title = doc.select('.gallery-item .image-title').first(); title ? String(title.text()).trim() : ''",
  "singleUrl": false,
  "sortUrl": "搜索::https://www.cool18.com/bbs/index.php?isok=true&action=search&act=threadsearch&app=forum&keywords={{source.getVariable()}}\n性趣贴图::https://www.cool18.com/bbs/index.php?isok=true\n私房自拍::https://www.cool18.com/bbs6/index.php?isok=true\n性感地带::https://www.cool18.com/site/index.php?act=bbs&bbsid=1106&isok=true\n卡通福利::https://www.cool18.com/site/index.php?act=bbs&bbsid=1111&isok=true",
  "sourceComment": "酷18性趣贴图\n支持主页和分类页面两种格式\n支持图片浏览、返回顶部\n注意:部分内容可能需要登录",
  "sourceGroup": "18+",
  "sourceIcon": "https://www.cool18.com/favicon.ico",
  "sourceName": "酷18性趣贴图",
  "sourceUrl": "https://www.cool18.com/bbs/index.php?isok=true",
  "variableComment": "输入关键词搜索"
}
