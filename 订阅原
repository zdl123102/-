{
  "articleStyle": 2,
  "enableJs": true,
  "enabled": true,
  "header": "{\n  \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\",\n  \"Referer\": \"https://nungvl.net/\"\n}",
  "ruleArticles": ".videos > .thumb-view",
  "ruleTitle": ".denomination@text",
  "ruleLink": ".contentme a@href",
  "ruleImage": ".xld@src",
  "ruleNextPage": "",
  "ruleContent": "@js:\nvar currentUrl = java.getUrl();\nvar baseUrl = currentUrl.split('?')[0].replace(/\\/\\d+\\.cg$/, '');\nvar pageMatch = currentUrl.match(/\\/(\\d+)\\.cg/);\nvar currentPage = pageMatch ? parseInt(pageMatch[1]) : 1;\n\n// 查找总页数\nvar pageLinks = java.getElements('.pagination-site a');\nvar maxPage = currentPage;\nfor (var i in pageLinks) {\n  var href = pageLinks[i].attr('href');\n  if (href) {\n    var m = href.match(/\\/(\\d+)\\.cg/);\n    if (m && parseInt(m[1]) > maxPage) maxPage = parseInt(m[1]);\n  }\n}\nvar totalPages = maxPage;\n\nvar img_list = '';\nvar data = java.getElements('.thr-ot img, .main-content img');\nfor (var i in data) {\n  var url = data[i].attr('src') || data[i].attr('data-src');\n  if (url && !url.includes('undefined') && !url.includes('play_m.png') && !url.includes('logo') && !url.includes('icon')) {\n    img_list += '<img src=\"' + url + '\" />';\n  }\n}\n\nvar script = '';\nif (totalPages > 1) {\nscript = '<script>var base=\"'+baseUrl+'\",total='+totalPages+',loaded=['+currentPage+'],c=document.getElementById(\"container\");function l(){if(loaded.length>=total){document.getElementById(\"msg\").innerText=\"已加载全部\"+total+\"页\";return}document.getElementById(\"msg\").innerText=\"已加载\"+loaded.length+\"/\"+total+\"页...\";for(var i=1;i<=total;i++){if(loaded.indexOf(i)==-1){var x=new XMLHttpRequest;x.open(\"GET\",base+\"/\"+i+\".cg\"),x.onload=function(){var e=(new DOMParser).parseFromString(this.responseText,\"text/html\"),t=\"\";e.querySelectorAll(\".thr-ot img, .main-content img\").forEach(function(e){var a=e.getAttribute(\"src\")||e.getAttribute(\"data-src\");a&&!a.includes(\"undefined\")&&!a.includes(\"play_m.png\")&&!a.includes(\"logo\")&&!a.includes(\"icon\")&&(t+='<img src=\"'+a+'\" />')}),loaded.indexOf(i)==-1&&(loaded.push(i),c.innerHTML+='<p style=\"color:#666;\">--- 第'+i+'页 ---</p>'+t),document.getElementById(\"msg\").innerText=\"已加载\"+loaded.length+\"/\"+total+\"页\",loaded.length>=total?document.getElementById(\"msg\").innerText=\"已加载全部\"+total+\"页\":l()},x.send();break}};l();</script>'}\n\nresult = '<html><head><meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\"><title>'+title+'</title><style>body{background:#000;margin:0;padding:10px}h3{color:#fff;text-align:center;margin:15px 0}img{width:100%;max-width:800px;height:auto;display:block;margin:5px auto}#msg{color:#0f0;text-align:center;padding:10px}</style></head><body><h3>'+title+'</h3><p id=\"msg\" style=\"color:#0f0;text-align:center;padding:10px;\">'+(totalPages>1?'正在加载所有'+totalPages+'页...':'加载中...')+'</p><div id=\"container\">'+img_list+'</div>'+script+'</body></html>';",
  "sourceGroup": "图片套图",
  "sourceIcon": "https://nungvl.net/favicon.ico",
  "sourceName": "NungVL-Gallery",
  "sourceUrl": "https://nungvl.net/",
  "searchUrl": "https://www.google.com/search?q={{key}}+site:nungvl.net",
  "sortUrl": "搜索::https://www.google.com/search?q={{source.getVariable()}}+site:nungvl.net\n最新::https://nungvl.net/?page={{page}}\n热门::https://nungvl.net/hot?page={{page}}",
  "style": "body{background:#000;color:#fff}\nh3{text-align:center}\nimg{width:100%;max-width:800px;height:auto}",
  "type": 0
}

