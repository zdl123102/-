{
  "articleStyle": 2,
  "enableJs": true,
  "enabled": true,
  "header": "{\n  \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\",\n  \"Referer\": \"https://nungvl.net/\"\n}",
  "ruleArticles": ".videos > .thumb-view",
  "ruleTitle": ".denomination@text",
  "ruleLink": ".contentme a@href",
  "ruleImage": ".xld@src",
  "ruleNextPage": "",
  "ruleContent": "@js:\nvar currentUrl = java.getUrl();\nvar baseUrl = currentUrl.split('?')[0].replace(/\\/\\d+\\.cg$/, '');\n\n// 获取当前页码\nvar pageMatch = currentUrl.match(/\\/(\\d+)\\.cg/);\nvar currentPage = pageMatch ? parseInt(pageMatch[1]) : 1;\n\n// 尝试获取总页数\nvar pageInfo = java.getString('.pagination-site');\nvar totalPages = currentPage;\n\n// 查找所有分页链接\nvar pageLinks = java.getElements('.pagination-site a');\nvar maxPage = currentPage;\nfor (var i in pageLinks) {\n  var href = pageLinks[i].attr('href');\n  if (href) {\n    var match = href.match(/\\/(\\d+)\\.cg/);\n    if (match) {\n      var p = parseInt(match[1]);\n      if (p > maxPage) maxPage = p;\n    }\n  }\n}\ntotalPages = maxPage;\n\nvar img_list = '';\nvar data = java.getElements('.thr-ot img, .main-content img');\nfor (var i in data) {\n  var url = data[i].attr('src') || data[i].attr('data-src');\n  if (url && !url.includes('undefined') && !url.includes('play_m.png') && !url.includes('logo') && !url.includes('icon')) {\n    img_list += '<img src=\"' + url + '\" onerror=\"imgErrorHF(this);\" />\\n';\n  }\n}\n\nvar autoLoadScript = '';\nif (totalPages > 1) {\n  autoLoadScript = '<script>\\n' +\n    'var loadedPages = [' + currentPage + '];\\n' +\n    'var totalPages = ' + totalPages + ';\\n' +\n    'var baseUrl = \"' + baseUrl + '\";\\n' +\n    'function loadAllPages() {\\n' +\n    '  var container = document.getElementById(\"img_container\");\\n' +\n    '  var loaded = loadedPages.length;\\n' +\n    '  if (loaded >= totalPages) {\\n' +\n    '    document.getElementById(\"loading\").innerHTML = \"已加载全部 \" + totalPages + \" 页\";\\n' +\n    '    return;\\n' +\n    '  }\\n' +\n    '  document.getElementById(\"loading\").innerHTML = \"已加载 \" + loaded + \"/\" + totalPages + \" 页，正在加载...\";\\n' +\n    '  for (var i = 1; i <= totalPages; i++) {\\n' +\n    '    if (loadedPages.indexOf(i) === -1) {\\n' +\n    '      var img = new Image();\\n' +\n    '      img.onload = function() {\\n' +\n    '        var p = this.pageNum;\\n' +\n    '        if (loadedPages.indexOf(p) === -1) {\\n' +\n    '          loadedPages.push(p);\\n' +\n    '          container.innerHTML += \"<p style=\\\\\"color:#666;\\\\\">--- 第 \" + p + \" 页 ---</p>\" + this.html;\\n' +\n    '          loadAllPages();\\n' +\n    '        }\\n' +\n    '      };\\n' +\n    '      img.pageNum = i;\\n' +\n    '      img.html = \"\";\\n' +\n    '      (function(page) {\\n' +\n    '        var xhr = new XMLHttpRequest();\\n' +\n    '        xhr.open(\"GET\", baseUrl + \"/\" + page + \".cg\", true);\\n' +\n    '        xhr.onload = function() {\\n' +\n    '          var parser = new DOMParser();\\n' +\n    '          var doc = parser.parseFromString(xhr.responseText, \"text/html\");\\n' +\n    '          var imgs = doc.querySelectorAll(\".thr-ot img, .main-content img\");\\n' +\n    '          var html = \"\";\\n' +\n    '          imgs.forEach(function(img) {\\n' +\n    '            var src = img.getAttribute(\"src\") || img.getAttribute(\"data-src\");\\n' +\n    '            if (src && !src.includes(\"undefined\") && !src.includes(\"play_m.png\") && !src.includes(\"logo\") && !src.includes(\"icon\")) {\\n' +\n    '              html += \"<img src=\\\"\" + src + \"\\\" onerror=\\\"imgErrorHF(this);\\\" />\";\\n' +\n    '            }\\n' +\n    '          });\\n' +\n    '          var container = document.getElementById(\"img_container\");\\n' +\n    '          var loaded = loadedPages.length;\\n' +\n    '          if (loadedPages.indexOf(page) === -1) {\\n' +\n    '            loadedPages.push(page);\\n' +\n    '            container.innerHTML += \"<p style=\\\\\"color:#666;\\\\\">--- 第 \" + page + \" 页 ---</p>\" + html;\\n' +\n    '          }\\n' +\n    '          document.getElementById(\"loading\").innerHTML = \"已加载 \" + loadedPages.length + \"/\" + totalPages + \" 页\";\\n' +\n    '          if (loadedPages.length >= totalPages) {\\n' +\n    '            document.getElementById(\"loading\").innerHTML = \"已加载全部 \" + totalPages + \" 页\";\\n' +\n    '          } else {\\n' +\n    '            loadAllPages();\\n' +\n    '          }\\n' +\n    '        };\\n' +\n    '        xhr.send();\\n' +\n    '      })(i);\\n' +\n    '      break;\\n' +\n    '    }\\n' +\n    '  }\\n' +\n    '}\\n' +\n    'window.onload = loadAllPages;\\n' +\n    '</script>';\n}\n\nresult = '<html>\\n<head>\\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\">\\n<meta name=\"referrer\" content=\"no-referrer\">\\n<title>${title}</title>\\n<style>body{background:#000;margin:0;padding:10px}h3{color:#fff;text-align:center;margin:15px 0}img{width:100%;max-width:800px;height:auto;display:block;margin:5px auto}#loading{color:#00ff00;text-align:center;padding:10px;font-size:14px}</style>\\n<script>\\nfunction imgErrorHF(image){var a=image.src;if(!a.includes(\"wp.com\")||!a){image.src=\"/undefined\";return true}if(a.includes(\"?ssl=\")||a.includes(\"&ssl=\")){image.src=a.replace(/\\\\/i[0-9].wp.com\\\\//,\"/\");return true}var selfMe=image;setTimeout(function(){selfMe.src=a+(a.includes(\"?\")?\"&ssl=1\":\"?ssl=1\")},3000);return true}\\n</script>' + autoLoadScript + '</head>\\n<body>\\n<h3>${title}</h3>\\n<div id=\"loading\" style=\"color:#00ff00;text-align:center;padding:10px;font-size:14px;\">' + (totalPages > 1 ? '正在加载所有 ' + totalPages + ' 页图片...' : '加载中...') + '</div>\\n<div id=\"img_container\">\\n' + img_list + '</div>\\n</body>\\n</html>';",
  "sourceGroup": "图片套图",
  "sourceIcon": "https://nungvl.net/favicon.ico",
  "sourceName": "NungVL-Gallery",
  "sourceUrl": "https://nungvl.net/",
  "searchUrl": "https://www.google.com/search?q={{key}}+site:nungvl.net",
  "sortUrl": "搜索::https://www.google.com/search?q={{source.getVariable()}}+site:nungvl.net\n最新::https://nungvl.net/?page={{page}}\n热门::https://nungvl.net/hot?page={{page}}",
  "style": "body{background:#000;color:#fff}\nh3{text-align:center}\nimg{width:100%;max-width:800px;height:auto}",
  "type": 0
}
